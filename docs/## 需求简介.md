## 需求简介

现在我打算写一个《剑侠情缘网络版叁》的“百战异闻录”玩法的精耐规划器。精耐指的是两个数值：精力和耐力
精耐规则如下：每个玩家初始有10000点精力和10000点耐力，精耐只会受到玩家学习的技能的影响。而技能由某些固定首领掉落（即A首领只会掉落属于A首领的技能a_1、a_2、a_3、a_4，每个首领拥有的技能数量不确定）。

## 游戏规则

精耐提升主要规则如下：

1. 当某个首领的所有技能等级都大于某个值的时候提升一定数值的精力与耐力（根据首领不同，提升的精耐比例不同，但是相同技能等级下精耐和是一致的，比如当首领”源明雅“全收集的时候+800精力与0点耐力，而秦雷可能就是+600耐力与200点精力。技能等级越高提升的精耐总量更高，比如1-4级全收集都是提升800点总量，而五级可能就是1600点。
2. 当首次集齐3个相同等级的技能会获得额外的精耐加成。比如首次集齐3本5级技能会获得1000点精神与耐力（仅提供一次）比如有3个1级技能会获得100点，3个2级技能获得200点（具体增加的数值会在`threeLevelSpiritEndurance`数组中声明）。那么如果玩家有10个1级技能，3个2级技能会获得300点，如果只有3个2级技能也是300点（因为这三个2级技能都大于1级）。注意，存在一些技能不参与3个相同技能的统计，这些会在`noThreeLevelSpiritEnduranceSkills`集合中声明。

其它注意事项：

1. 技能主要通过技能书的形式提升，技能书来源于击败首领掉落与交易行购买（每个首领只会有1-2个技能是可以交易的）。可交易的技能ID在`tradeableSkills`集合中进行了声明。一本N重的技能书可以让技能提升1级（不能大于N级），比如角色当前技能是7级，当他使用一本9重的技能书可以将技能提升到8级。再使用一本9重的技能书可以将技能提升到9级。之后如果想要提升到10级则需要使用10重的技能书。

2. 除了技能书以外，玩家还可以通过消耗“技能通本”的方式提升技能等级，技能通本也有等级。技能从0级升到1级需要消耗1本1级技能通本，技能从1级升到2级需要消耗2本1级技能通本，从2级升到3级需要消耗5本1级技能通本，从3级升到4级需要消耗1本2级技能通本。具体的消耗规则在`bookLearnCost`中声明：

```ts
export const bookLearnCost = [
    null, // 0级
    { level: 1, cost: 1 }, // 0 -> 1
    { level: 1, cost: 2 }, // 1 -> 2
    { level: 1, cost: 5 }, // 2 -> 3
    { level: 2, cost: 1 }, // 3 -> 4
    { level: 3, cost: 1 }, // 4 -> 5
    { level: 4, cost: 1 }, // 5 -> 6
    { level: 4, cost: 2 }, // 6 -> 7
    { level: 4, cost: 5 }, // 7 -> 8
    null, // 8 -> 9 不能通过通本升级
    null, // 9 -> 10 不能通过通本升级
];
```

3. 需要注意的是，有的技能仅允许某些性别的玩家学习。见`MonsterSkill`的`gender`字段。当目标角色的性别与技能性别不匹配的时候，可以将目标技能书换为另一个性别匹配的技能书，可替换技能书的ID在`genderSkillReplaceMap`Map中进行了声明。

4. 某些技能不参与精耐的计算，比如某技能`a_1`属于首领A且不参与精耐计算，角色只要首领A的其它技能`a_2`、`a_3`、`a_4`都大于某个值的时候，依然可以获得精耐提升，但是不会因为技能`a_1`的存在而影响精耐提升。这样的技能会在`noSpiritEnduranceSkills`集合中声明。


## 数据结构

```ts
/** 玩家数据 */
type Gender = "male" | "female";

interface Role {
    gender: Gender;
    skills: RoleSkill[];
    inventory: InventoryItem[];
}

interface RoleSkill {
    id: number;
    level: number;
}

interface InventoryItem {
    itemId: number;
}

/** 技能数据 */
interface MonsterSkill {
    id: number;
    gender: Gender | null; // 技能性别，null表示通用技能
    belongBoss?: string[];
    bookItemId?: string[]; // 技能书道具ID, 是一个数组，数组下标表示技能书等级，值表示技能书的物品ID。
}
```

## 输入

输入是一个`Role`对象，一系列`MonsterSkill`对象和`BookItem`对象。和一个
你需要考虑角色当前有的技能，计算出角色的精力值与耐力值。
然后根据角色拥有的技能书，计算出损耗最少的金钱与通本提升到指定的精耐的路径。
用户会输入一个数组`bookCost`，代表他能接受的`一本技能通本价值的金额`,比如`[0,0,0,2000000]`代表用户认为花钱购买1、2、3级通本是十分不值得的，而4级通本值得花费2000000金钱购买（这个值主要用于权衡某个技能升级是使用通本还是通过交易行购买技能书。
用户还会输入一个`targetSpirit`和`targetEndurance`，代表用户希望提升到的精力与耐力值。
用户还会输入一个`allowUseHighLevelBook`，代表用户是否允许使用高等级技能书跨等级提升技能（比如9重、10重的技能无法通过技能通本提升，只能通过技能书学习。而如果使用9重技能书将7重升到8重意味着省下了5本通本，但是有些用户并不愿意使用9重技能书。但是请注意，当从8级使用过9重技能书升级到9级的时候可以无视该设定允许学习。）

你需要通过一系列步骤来计算出最优的精耐提升路径。
每一步操作可以做以下步骤之一:
1. 购买技能书：从交易行购买一本技能书，此操作后会消耗金钱，增加一本技能书到角色的背包。
2. 使用技能书升级技能：使用背包中的一本技能书来提升角色的技能等级，此操作会消耗一本技能对应的技能书，对应的技能等级提升一级。
3. 使用技能通本升级技能：消耗技能通本将某个技能提升1级，消耗规则见【游戏规则】

期望的输出:
1. 一个操作序列，这个数列由上述的操作组成。